import{j as d,m as ze,R as ee}from"./index-DJf74qFj.js";const ae=({variant:e="default"})=>{const t={default:"border-inherit",inset:"bg-dashed",dashed:"border-inherit border-dashed"};return d.jsx("hr",{className:`mb-0.5 ${t[e]}`})},T=(...e)=>e.reduce((t,n)=>(...r)=>n(t(...r))),Re=(...e)=>e.reduce((t,n)=>(...r)=>t(n(...r))),Be=e=>t=>t.opponents.includes(e.ID),Ce=(e,t)=>e.filter(Be(t)),Le=e=>e.matchesWon/(e.matchesWon+e.matchesLost),He=(e,t)=>Ce(e,t).reduce((n,r,s,o)=>n+Le(r)/o.length,0),W=(e,t)=>e.map(n=>{const s=t.filter(o=>o.pairing.includes(n.ID)).reduce((o,i)=>{const c=i.pairing.findIndex(f=>n.ID===f),a=i.pairing.length-1-c,l=i.result[c]>i.result[a];return{gamesWon:o.gamesWon+i.result[c],matchesWon:o.matchesWon+(l||i.hasBye?1:0),matchesLost:o.matchesLost+(l?0:1),opponents:[...o.opponents,i.pairing[a]]}},{gamesWon:0,matchesWon:0,matchesLost:0,opponents:[]});return{...n,...s}}),le=e=>e.map(t=>({...t,omv:He(e,t)})),L=e=>e.filter(t=>t.active),p=[];for(let e=0;e<256;++e)p.push((e+256).toString(16).slice(1));function Ue(e,t=0){return(p[e[t+0]]+p[e[t+1]]+p[e[t+2]]+p[e[t+3]]+"-"+p[e[t+4]]+p[e[t+5]]+"-"+p[e[t+6]]+p[e[t+7]]+"-"+p[e[t+8]]+p[e[t+9]]+"-"+p[e[t+10]]+p[e[t+11]]+p[e[t+12]]+p[e[t+13]]+p[e[t+14]]+p[e[t+15]]).toLowerCase()}let Y;const Ge=new Uint8Array(16);function qe(){if(!Y){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Y=crypto.getRandomValues.bind(crypto)}return Y(Ge)}const j={};function Ke(e,t,n){let r;{const s=Date.now(),o=qe();Je(j,s,o),r=Xe(o,j.msecs,j.nsecs,j.clockseq,j.node,t,n)}return t??Ue(r)}function Je(e,t,n){return e.msecs??(e.msecs=-1/0),e.nsecs??(e.nsecs=0),t===e.msecs?(e.nsecs++,e.nsecs>=1e4&&(e.node=void 0,e.nsecs=0)):t>e.msecs?e.nsecs=0:t<e.msecs&&(e.node=void 0),e.node||(e.node=n.slice(10,16),e.node[0]|=1,e.clockseq=(n[8]<<8|n[9])&16383),e.msecs=t,e}function Xe(e,t,n,r,s,o,i=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(!o)o=new Uint8Array(16),i=0;else if(i<0||i+16>o.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);t??(t=Date.now()),n??(n=0),r??(r=(e[8]<<8|e[9])&16383),s??(s=e.slice(10,16)),t+=122192928e5;const c=((t&268435455)*1e4+n)%4294967296;o[i++]=c>>>24&255,o[i++]=c>>>16&255,o[i++]=c>>>8&255,o[i++]=c&255;const a=t/4294967296*1e4&268435455;o[i++]=a>>>8&255,o[i++]=a&255,o[i++]=a>>>24&15|16,o[i++]=a>>>16&255,o[i++]=r>>>8|128,o[i++]=r&255;for(let l=0;l<6;++l)o[i++]=s[l];return o}const S=-1,Ye=(e,t,n=Ke())=>({roundID:e,ID:n,pairing:t,result:[0,0],hasBye:t.includes(S)}),H=(e,t)=>e.map(n=>Ye(t,n)),$=e=>(t,n)=>t[e]>n[e]?-1:t[e]<n[e]?1:0,De=e=>t=>t.slice().sort((n,r)=>{let s=0,o=0;for(;s===0&&o<e.length;)s=e[o](n,r),o+=1;return s}),ue=e=>De([$("matchesWon"),$("gamesWon"),$("omv")])(e),un=(e,t)=>Re(ue,le,W)(e,t),Qe=e=>e.reduce((t,n)=>t.set(n,1+(t.get(n)||0)),new Map),Ze=e=>e[e.length-1],Ve=e=>t=>t[e],U=e=>e%2!==0,et=e=>!U(e),Me=e=>new Set(e.map(t=>t.roundID)).size,tt=e=>2**Math.ceil(Math.log(e)/Math.log(2)),nt=e=>e!==0&&(e&e-1)===0,Oe=e=>Math.ceil(Math.log2(e)+1),rt=(e,t)=>{let n,r=null;U(e.length)?(r=e[0],n=e.slice(1)):n=e;const s=Math.min(t,n.length-1),o=[];for(let i=0;i<n.length-s;i++)o.push([n[i],n[i+s]]);return r?[[r,S],...o]:o},st=e=>{const t=Math.min(...e.map(r=>r.opponents.length)),n=Oe(e.length);return rt(ue(e).map(r=>r.ID),n-t)},ot={name:"Amalfi",type:"AMALFI",makeRound:(e,t,n)=>H(T(W,le,L,st)(e,t),n),roundsNeeded:Oe},me=e=>e.reduce((t,n,r,s)=>r%2===0&&r+1<s.length?t.concat([[s[r],s[r+1]]]):t,[]),it=e=>t=>{let n=t.slice(),r=[];if(e===0&&!nt(t.length)){const f=tt(t.length)-t.length;n=t.slice(f),r=t.slice(0,f)}const s=n.filter(f=>f.matchesLost===0).map(f=>f.ID),o=n.filter(f=>f.matchesLost===1).sort((f,u)=>f.opponents.length-u.opponents.length).map(f=>f.ID),i=s.length>1?me(s):[],c=o.length>1?me(o):[];if(r.length+s.length+o.length===1)return[];let l;return!i.length&&!c.length?l=[[s[0],o[0]]]:l=[...r.map(f=>[f.ID,S]),...i,...c],l},ct=e=>Math.ceil(Math.log2(e))+Math.ceil(Math.log2(Math.log2(e))),at={name:"Elimination",type:"ELIMINATION",makeRound:(e,t,n)=>H(T(W,L,it(Me(t)))(e,t),n),roundsNeeded:ct,eliminate:(e,t)=>W(e,t).filter(s=>s.active).filter(s=>s.matchesLost>1)},lt=(e,t)=>{const n=e.slice(0,1),r=e.slice(1),s=r.slice(-t).concat(r.slice(0,-t));return[...n,...s]},ut=e=>{const t=Math.floor(e.length/2),n=e.slice(0,t),r=e.slice(t).reverse();return n.map((s,o)=>[s,r[o]])},dt=e=>t=>{const n=t.map(o=>o.ID);U(n.length)&&n.push(S);const r=lt(n,e);return ut(r)},ft=e=>et(e)?e-1:e,pe={name:"Round Robin",type:"ROUND_ROBIN",makeRound:(e,t,n)=>H(T(L,dt(Me(t)))(e),n),roundsNeeded:ft},ht=e=>e.filter(t=>t===S).length,mt=e=>e.map(t=>({...t,bye:ht(t.opponents)})),pt=e=>U(e.length)?T(ue,mt,De([$("bye")]),Ze,Ve("ID"))(e):S,yt=e=>Math.max(...e.map(t=>t.gamesWon)),gt=e=>Array.from({length:e},(t,n)=>n+1),_t=e=>{const t=e.length,n=[];for(let r=0;r<t-1;r++)for(let s=r+1;s<t&&r!==s;s++)n.push([r,s]);return n},xt=e=>Re(_t,gt)(e.length),Pt=e=>{const t=yt(e);return xt(e).map(([r,s])=>[r,s,wt(t,e[r],e[s])])};function wt(e,t,n){let r=0;const s=Qe(t.opponents),o=Math.max(...Array.from(s.values())),i=s.get(n.ID)||0;s.size>0&&i<o&&(r+=ye(e,e)+1);const c=Math.max(t.gamesWon,n.gamesWon),a=Math.min(t.gamesWon,n.gamesWon),l=c-a,f=e-l;return r+=ye(c,f),r}function ye(e,t){return(e+1)**2*(t+1)**2}const vt=e=>t=>t.reduce((n,r,s)=>{const{pairs:o,paired:i}=n,c=[e[s].ID,r!==-1?e[r].ID:-1];return c.some(a=>i.indexOf(a)!==-1)?n:{pairs:[...o,c],paired:[...i,...c]}},{pairs:[],paired:[]}).pairs,St=e=>ze(e),It=e=>{const t=pt(e),n=e.filter(s=>s.ID!==t),r=T(Pt,St,vt(n))(n);return t!==S?[...r,[t,S]]:r},bt=e=>t=>Math.ceil(Math.log2(t)+Math.log2(e)),Nt={name:"Swiss",type:"SWISS",makeRound:(e,t,n)=>H(T(W,le,L,It)(e,t),n),roundsNeeded:bt(1)};function ge(e){return e.eliminate!==void 0}function F(e){switch(e){case"ROUND_ROBIN":return pe;case"SWISS":return Nt;case"ELIMINATION":return at;case"AMALFI":return ot;default:return pe}}const dn=({children:e,variant:t="primary",disabled:n=!1,type:r="button",className:s="",onClick:o,fullWidth:i=!1,iconSlot:c,title:a})=>{const l="font-medium text-md uppercase focus:outline-none focus:ring-2 focus:ring-offset-1 whitespace-nowrap group",f={primary:"cursor-pointer border-primary text-primary focus:ring-red-400 ",secondary:"cursor-pointer border-secondary text-secondary  focus:ring-blue-400"},u="border-gray-300 text-gray-300 cursor-not-allowed",x=i?"w-full":"";return d.jsx("button",{type:r,disabled:n,className:`
        ${l}
        ${n?u:f[t]}
        ${x}
        ${s}
      `,onClick:n?void 0:o,title:a,children:d.jsxs("div",{className:"flex w-full flex-row items-stretch justify-between border-1",children:[d.jsx("span",{className:"flex flex-1 items-center px-4 py-2 ",children:e}),c&&d.jsx("span",{className:"border-l-1",children:d.jsx("i",{className:"flex h-10 w-10 items-center group-hover:bg-white group-disabled:group-hover:bg-transparent",children:c})})]})})};function Q(e){return e||""}const Rt=({children:e,turnamentType:t,playersNum:n,minPtsToWin:r,minRounds:s,minMatches:o,roundsPlayed:i,matchesPlayed:c,minGames:a,maxGames:l,gamesPlayed:f})=>{const u=["Type","Players","Pts To Win","Rounds","Matches","Games"],x=[Q(t),Q(n),Q(r),s?`${i} / ${s}`:"",o?`${c} / ${o}`:"",a?`${f} / ${a}-${l}`:""];return d.jsxs("div",{className:"static border-secondary border-t-2 p-0.5 ",children:[d.jsx("div",{className:"py-6 text-center font-bold text-4xl text-secondary uppercase leading-none",children:e}),d.jsx(ae,{}),d.jsxs("table",{className:"w-full table-fixed border-separate border-spacing-0.5",children:[d.jsx("thead",{children:d.jsx("tr",{children:u.slice(0,3).map(m=>d.jsx("th",{className:"border-2 border-secondary px-2 py-1 font-bold text-secondary text-xs uppercase",children:m},m))})}),d.jsx("tbody",{children:d.jsx("tr",{children:x.slice(0,3).map((m,R)=>d.jsx("td",{className:"h-[27px] border border-secondary px-2 text-center font-bold text-2xl text-handwritten leading-none",children:m},`${R}${m}`))})})]}),d.jsxs("table",{className:"-mt-[1px] w-full table-fixed border-separate border-spacing-0.5",children:[d.jsx("thead",{children:d.jsx("tr",{children:u.slice(3).map(m=>d.jsx("th",{className:"border-2 border-secondary px-2 py-1 font-bold text-secondary text-xs uppercase",children:m},m))})}),d.jsx("tbody",{children:d.jsx("tr",{children:x.slice(3).map((m,R)=>d.jsx("td",{className:"h-[27px] border border-secondary px-2 text-center font-bold text-2xl text-handwritten leading-none",children:m},`${R}${m}`))})})]})]})},_e=e=>{let t;const n=new Set,r=(l,f)=>{const u=typeof l=="function"?l(t):l;if(!Object.is(u,t)){const x=t;t=f??(typeof u!="object"||u===null)?u:Object.assign({},t,u),n.forEach(m=>m(t,x))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>a,subscribe:l=>(n.add(l),()=>n.delete(l))},a=t=e(r,s,c);return c},Dt=e=>e?_e(e):_e,Mt=e=>e;function Ot(e,t=Mt){const n=ee.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return ee.useDebugValue(n),n}const xe=e=>{const t=Dt(e),n=r=>Ot(t,r);return Object.assign(n,t),n},Tt=e=>e?xe(e):xe;function jt(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var o;const i=a=>a===null?null:JSON.parse(a,void 0),c=(o=n.getItem(s))!=null?o:null;return c instanceof Promise?c.then(i):i(c)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const te=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return te(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return te(r)(n)}}}},Wt=(e,t)=>(n,r,s)=>{let o={storage:jt(()=>localStorage),partialize:h=>h,version:0,merge:(h,D)=>({...D,...h}),...t},i=!1;const c=new Set,a=new Set;let l=o.storage;if(!l)return e((...h)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...h)},r,s);const f=()=>{const h=o.partialize({...r()});return l.setItem(o.name,{state:h,version:o.version})},u=s.setState;s.setState=(h,D)=>{u(h,D),f()};const x=e((...h)=>{n(...h),f()},r,s);s.getInitialState=()=>x;let m;const R=()=>{var h,D;if(!l)return;i=!1,c.forEach(y=>{var v;return y((v=r())!=null?v:x)});const k=((D=o.onRehydrateStorage)==null?void 0:D.call(o,(h=r())!=null?h:x))||void 0;return te(l.getItem.bind(l))(o.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==o.version){if(o.migrate){const v=o.migrate(y.state,y.version);return v instanceof Promise?v.then(X=>[!0,X]):[!0,v]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var v;const[X,Fe]=y;if(m=o.merge(Fe,(v=r())!=null?v:x),n(m,!0),X)return f()}).then(()=>{k==null||k(m,void 0),m=r(),i=!0,a.forEach(y=>y(m))}).catch(y=>{k==null||k(void 0,y)})};return s.persist={setOptions:h=>{o={...o,...h},h.storage&&(l=h.storage)},clearStorage:()=>{l==null||l.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>R(),hasHydrated:()=>i,onHydrate:h=>(c.add(h),()=>{c.delete(h)}),onFinishHydration:h=>(a.add(h),()=>{a.delete(h)})},o.skipHydration||R(),m||x},At=Wt;var Te=Symbol.for("immer-nothing"),Pe=Symbol.for("immer-draftable"),g=Symbol.for("immer-state");function P(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var M=Object.getPrototypeOf;function O(e){return!!e&&!!e[g]}function b(e){var t;return e?je(e)||Array.isArray(e)||!!e[Pe]||!!((t=e.constructor)!=null&&t[Pe])||q(e)||K(e):!1}var Et=Object.prototype.constructor.toString();function je(e){if(!e||typeof e!="object")return!1;const t=M(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Et}function z(e,t){G(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function G(e){const t=e[g];return t?t.type_:Array.isArray(e)?1:q(e)?2:K(e)?3:0}function ne(e,t){return G(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function We(e,t,n){const r=G(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function kt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function q(e){return e instanceof Map}function K(e){return e instanceof Set}function I(e){return e.copy_||e.base_}function re(e,t){if(q(e))return new Map(e);if(K(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=je(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[g];let s=Reflect.ownKeys(r);for(let o=0;o<s.length;o++){const i=s[o],c=r[i];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[i]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[i]})}return Object.create(M(e),r)}else{const r=M(e);if(r!==null&&n)return{...e};const s=Object.create(r);return Object.assign(s,e)}}function de(e,t=!1){return J(e)||O(e)||!b(e)||(G(e)>1&&(e.set=e.add=e.clear=e.delete=$t),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>de(r,!0))),e}function $t(){P(2)}function J(e){return Object.isFrozen(e)}var Ft={};function N(e){const t=Ft[e];return t||P(0,e),t}var A;function Ae(){return A}function zt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function we(e,t){t&&(N("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function se(e){oe(e),e.drafts_.forEach(Bt),e.drafts_=null}function oe(e){e===A&&(A=e.parent_)}function ve(e){return A=zt(A,e)}function Bt(e){const t=e[g];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Se(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[g].modified_&&(se(t),P(4)),b(e)&&(e=B(t,e),t.parent_||C(t,e)),t.patches_&&N("Patches").generateReplacementPatches_(n[g].base_,e,t.patches_,t.inversePatches_)):e=B(t,n,[]),se(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Te?e:void 0}function B(e,t,n){if(J(t))return t;const r=t[g];if(!r)return z(t,(s,o)=>Ie(e,r,t,s,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return C(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let o=s,i=!1;r.type_===3&&(o=new Set(s),s.clear(),i=!0),z(o,(c,a)=>Ie(e,r,s,c,a,n,i)),C(e,s,!1),n&&e.patches_&&N("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Ie(e,t,n,r,s,o,i){if(O(s)){const c=o&&t&&t.type_!==3&&!ne(t.assigned_,r)?o.concat(r):void 0,a=B(e,s,c);if(We(n,r,a),O(a))e.canAutoFreeze_=!1;else return}else i&&n.add(s);if(b(s)&&!J(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;B(e,s),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&C(e,s)}}function C(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&de(t,n)}function Ct(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Ae(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,o=fe;n&&(s=[r],o=E);const{revoke:i,proxy:c}=Proxy.revocable(s,o);return r.draft_=c,r.revoke_=i,c}var fe={get(e,t){if(t===g)return e;const n=I(e);if(!ne(n,t))return Lt(e,n,t);const r=n[t];return e.finalized_||!b(r)?r:r===Z(e.base_,t)?(V(e),e.copy_[t]=ce(r,e)):r},has(e,t){return t in I(e)},ownKeys(e){return Reflect.ownKeys(I(e))},set(e,t,n){const r=Ee(I(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const s=Z(I(e),t),o=s==null?void 0:s[g];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(kt(n,s)&&(n!==void 0||ne(e.base_,t)))return!0;V(e),ie(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Z(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,V(e),ie(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=I(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){P(11)},getPrototypeOf(e){return M(e.base_)},setPrototypeOf(){P(12)}},E={};z(fe,(e,t)=>{E[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});E.deleteProperty=function(e,t){return E.set.call(this,e,t,void 0)};E.set=function(e,t,n){return fe.set.call(this,e[0],t,n,e[0])};function Z(e,t){const n=e[g];return(n?I(n):e)[t]}function Lt(e,t,n){var s;const r=Ee(t,n);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(e.draft_):void 0}function Ee(e,t){if(!(t in e))return;let n=M(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=M(n)}}function ie(e){e.modified_||(e.modified_=!0,e.parent_&&ie(e.parent_))}function V(e){e.copy_||(e.copy_=re(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Ht=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const i=this;return function(a=o,...l){return i.produce(a,f=>n.call(this,f,...l))}}typeof n!="function"&&P(6),r!==void 0&&typeof r!="function"&&P(7);let s;if(b(t)){const o=ve(this),i=ce(t,void 0);let c=!0;try{s=n(i),c=!1}finally{c?se(o):oe(o)}return we(o,r),Se(s,o)}else if(!t||typeof t!="object"){if(s=n(t),s===void 0&&(s=t),s===Te&&(s=void 0),this.autoFreeze_&&de(s,!0),r){const o=[],i=[];N("Patches").generateReplacementPatches_(t,s,o,i),r(o,i)}return s}else P(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(i,...c)=>this.produceWithPatches(i,a=>t(a,...c));let r,s;return[this.produce(t,n,(i,c)=>{r=i,s=c}),r,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){b(e)||P(8),O(e)&&(e=Ut(e));const t=ve(this),n=ce(e,void 0);return n[g].isManual_=!0,oe(t),n}finishDraft(e,t){const n=e&&e[g];(!n||!n.isManual_)&&P(9);const{scope_:r}=n;return we(r,t),Se(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const r=N("Patches").applyPatches_;return O(e)?r(e,t):this.produce(e,s=>r(s,t))}};function ce(e,t){const n=q(e)?N("MapSet").proxyMap_(e,t):K(e)?N("MapSet").proxySet_(e,t):Ct(e,t);return(t?t.scope_:Ae()).drafts_.push(n),n}function Ut(e){return O(e)||P(10,e),ke(e)}function ke(e){if(!b(e)||J(e))return e;const t=e[g];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=re(e,t.scope_.immer_.useStrictShallowCopy_)}else n=re(e,!0);return z(n,(r,s)=>{We(n,r,ke(s))}),t&&(t.finalized_=!1),n}var _=new Ht,Gt=_.produce;_.produceWithPatches.bind(_);_.setAutoFreeze.bind(_);_.setUseStrictShallowCopy.bind(_);_.applyPatches.bind(_);_.createDraft.bind(_);_.finishDraft.bind(_);const qt=e=>(t,n,r)=>(r.setState=(s,o,...i)=>{const c=typeof s=="function"?Gt(s):s;return t(c,o,...i)},e(r.setState,n,r)),Kt=qt,be={players:[],nextPlayerID:0},Jt=(e,t)=>({...be,setPlayers(n){e(r=>{r.players=n.map(({name:s})=>({ID:++t().nextPlayerID,name:s,active:!0}))})},removePlayer(n){const{ID:r}=n;e(s=>{const o=s.players.findIndex(i=>i.ID===r);o!==-1&&s.players.splice(o,1)})},deactivatePlayer(n){const{ID:r}=n;e(s=>{const o=s.players.findIndex(i=>i.ID===r);o!==-1&&(s.players[o].active=!1)})},disablePlayer(n){t().deactivatePlayer(n),t().readdRound(t().players)},resetPlayers(){e(be)}});function Xt(e){return Array.from(new Set(e))}function Yt(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function Qt(e,t){if(!e)throw new Error(t)}const fn=5,Ne={schedulerType:void 0,matches:[],currentRoundNum:0,minPointsToWin:0},Zt=(e,t)=>({...Ne,setSchedulerType(n){e(r=>{r.schedulerType=n})},addRound(n){const r=t().schedulerType,s=++t().currentRoundNum;if(!r)return;const o=F(r),i=t().matches,c=o.makeRound(n,i,s);ge(o)&&o.eliminate(n,i),e(a=>{a.matches.push(...c)})},readdRound(n){const r=t().currentRoundNum,s=t().schedulerType,o=t().matches;if(s)return;const i=o.filter(l=>l.roundID!==r);if(!s)return;const a=F(s).makeRound(n,o,r);e(l=>{l.matches=[...i,...a]})},updateMatch(n){e(r=>{const s=r.matches.findIndex(o=>o.ID===n.ID);s!==-1&&(r.matches[s]=n)})},nextRound(){const n=t().schedulerType,r=t().players,s=t().matches;if(n){const o=F(n);if(ge(o)){const i=o.eliminate(r,s);for(const c of i)t().deactivatePlayer(c)}}t().addRound(r)},resetRounds(){e(Ne)},setMinPointsToWin(n){e(r=>{r.minPointsToWin=n})}}),$e=e=>e.schedulerType?F(e.schedulerType).roundsNeeded(e.players.length):0,Vt=e=>e.matches.filter(t=>t.roundID===e.currentRoundNum&&!t.hasBye),en=e=>Math.max(e.currentRoundNum-1,0),tn=e=>e.matches.filter(t=>t.roundID!==e.currentRoundNum&&!t.hasBye).reverse(),hn=e=>Xt(tn(e).map(t=>t.roundID)),mn=e=>Vt(e).every(({result:t})=>t.some(n=>n===e.minPointsToWin)),pn=e=>t=>t.matches.filter(n=>n.roundID===e),he=e=>{if(!e.schedulerType)return 0;const t=$e(e),n=e.players.length;return Math.floor(n/2)*t},nn=e=>e.matches.filter(t=>t.result.some(n=>n===e.minPointsToWin)).length,rn=e=>he(e)*e.minPointsToWin,sn=e=>he(e)*(e.minPointsToWin*2-1),on=e=>e.matches.filter(t=>t.hasBye===!1).reduce((t,n)=>t+Yt(n.result),0),w=Tt()(At(Kt((...e)=>({...Jt(...e),...Zt(...e)})),{name:"turnament-store"})),cn=[{value:"ROUND_ROBIN",name:"Round Robin",shortName:"R.R.",description:"A Round Robin tournament is a competition format where each participant competes against every other participant exactly once, ensuring equal opportunity and comprehensive matchups."},{value:"ELIMINATION",name:"Elimination",shortName:"Elimn.",description:"An Elimination tournament is a competition format where participants are progressively eliminated after a single loss, with matches narrowing down the field until only one competitor remains as the champion."},{value:"SWISS",name:"Swiss",shortName:"Swiss",description:"A Swiss tournament is a non-elimination format where competitors play a fixed number of rounds against opponents with similar current standings, efficiently determining rankings without requiring every participant to face all others."},{value:"AMALFI",name:"Amalfi",shortName:"Amalfi",description:"An Amalfi tournament is a modified Swiss-style format that pairs participants with similar records while optimizing match diversity, providing balanced competition with fewer rounds than a Round Robin system."}],an=e=>{const t=cn.find(n=>n.value===e);return Qt(t,"This value was promised to be there."),t};function yn({children:e}){const t=w(u=>u.players.length),n=w(u=>u.minPointsToWin),r=w(u=>u.schedulerType),s=w(u=>$e(u)),o=w(u=>he(u)),i=w(u=>en(u)),c=w(u=>nn(u)),a=w(u=>rn(u)),l=w(u=>sn(u)),f=w(u=>on(u));return d.jsxs("header",{children:[d.jsx("div",{className:"px-4 py-6",children:d.jsx(Rt,{minRounds:s,roundsPlayed:i,minMatches:o,matchesPlayed:c,minGames:a,maxGames:l,gamesPlayed:f,playersNum:t,minPtsToWin:n,turnamentType:r?an(r).shortName:"",children:e})}),d.jsx(ae,{variant:"dashed"})]})}function gn({children:e}){const t=ee.Children.count(e)>1?"justify-between":"justify-end";return d.jsxs("footer",{className:"shadow",children:[d.jsx(ae,{variant:"dashed"}),d.jsx("div",{className:`flex p-4 ${t}`,children:e})]})}function _n({children:e}){return d.jsx("div",{className:"m-auto grid h-dvh max-w-xl grid-rows-[1fr_auto]",children:e})}function xn({children:e}){return d.jsx("div",{className:"overflow-y-auto scroll-smooth",children:d.jsx("div",{className:"h-full",children:e})})}function Pn({children:e}){return d.jsx("main",{className:"px-4 py-6",children:e})}export{dn as B,fn as D,ae as H,_n as P,xn as a,yn as b,Pn as c,gn as d,S as e,hn as f,un as g,pn as h,mn as i,Vt as j,cn as s,w as u};
