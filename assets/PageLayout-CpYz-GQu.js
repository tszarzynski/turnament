import{j as l,m as Fe,R as V}from"./index-Bl9b_RYH.js";const ce=({variant:e="default"})=>{const t=e==="default"?"border-inherit":"bg-dashed";return l.jsx("hr",{className:`mb-0.5 ${t}`})},O=(...e)=>e.reduce((t,n)=>(...r)=>n(t(...r))),be=(...e)=>e.reduce((t,n)=>(...r)=>t(n(...r))),ze=e=>t=>t.opponents.includes(e.ID),Be=(e,t)=>e.filter(ze(t)),Ce=e=>e.matchesWon/(e.matchesWon+e.matchesLost),$e=(e,t)=>Be(e,t).reduce((n,r,s,o)=>n+Ce(r)/o.length,0),j=(e,t)=>e.map(n=>{const s=t.filter(o=>o.pairing.includes(n.ID)).reduce((o,i)=>{const c=i.pairing.findIndex(d=>n.ID===d),a=i.pairing.length-1-c,u=i.result[c]>i.result[a];return{gamesWon:o.gamesWon+i.result[c],matchesWon:o.matchesWon+(u||i.hasBye?1:0),matchesLost:o.matchesLost+(u?0:1),opponents:[...o.opponents,i.pairing[a]]}},{gamesWon:0,matchesWon:0,matchesLost:0,opponents:[]});return{...n,...s}}),ae=e=>e.map(t=>({...t,omv:$e(e,t)})),C=e=>e.filter(t=>t.active),h=[];for(let e=0;e<256;++e)h.push((e+256).toString(16).slice(1));function Le(e,t=0){return(h[e[t+0]]+h[e[t+1]]+h[e[t+2]]+h[e[t+3]]+"-"+h[e[t+4]]+h[e[t+5]]+"-"+h[e[t+6]]+h[e[t+7]]+"-"+h[e[t+8]]+h[e[t+9]]+"-"+h[e[t+10]]+h[e[t+11]]+h[e[t+12]]+h[e[t+13]]+h[e[t+14]]+h[e[t+15]]).toLowerCase()}let q;const He=new Uint8Array(16);function Ue(){if(!q){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");q=crypto.getRandomValues.bind(crypto)}return q(He)}const M={};function Ge(e,t,n){let r;{const s=Date.now(),o=Ue();Ke(M,s,o),r=Je(o,M.msecs,M.nsecs,M.clockseq,M.node,t,n)}return t??Le(r)}function Ke(e,t,n){return e.msecs??(e.msecs=-1/0),e.nsecs??(e.nsecs=0),t===e.msecs?(e.nsecs++,e.nsecs>=1e4&&(e.node=void 0,e.nsecs=0)):t>e.msecs?e.nsecs=0:t<e.msecs&&(e.node=void 0),e.node||(e.node=n.slice(10,16),e.node[0]|=1,e.clockseq=(n[8]<<8|n[9])&16383),e.msecs=t,e}function Je(e,t,n,r,s,o,i=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(!o)o=new Uint8Array(16),i=0;else if(i<0||i+16>o.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);t??(t=Date.now()),n??(n=0),r??(r=(e[8]<<8|e[9])&16383),s??(s=e.slice(10,16)),t+=122192928e5;const c=((t&268435455)*1e4+n)%4294967296;o[i++]=c>>>24&255,o[i++]=c>>>16&255,o[i++]=c>>>8&255,o[i++]=c&255;const a=t/4294967296*1e4&268435455;o[i++]=a>>>8&255,o[i++]=a&255,o[i++]=a>>>24&15|16,o[i++]=a>>>16&255,o[i++]=r>>>8|128,o[i++]=r&255;for(let u=0;u<6;++u)o[i++]=s[u];return o}const S=-1,qe=(e,t,n=Ge())=>({roundID:e,ID:n,pairing:t,result:[0,0],hasBye:t.includes(S)}),$=(e,t)=>e.map(n=>qe(t,n)),k=e=>(t,n)=>t[e]>n[e]?-1:t[e]<n[e]?1:0,Ne=e=>t=>t.slice().sort((n,r)=>{let s=0,o=0;for(;s===0&&o<e.length;)s=e[o](n,r),o+=1;return s}),ue=e=>Ne([k("matchesWon"),k("gamesWon"),k("omv")])(e),nn=(e,t)=>be(ue,ae,j)(e,t),Xe=e=>e.reduce((t,n)=>t.set(n,1+(t.get(n)||0)),new Map),Ye=e=>e[e.length-1],Qe=e=>t=>t[e],L=e=>e%2!==0,Ze=e=>!L(e),De=e=>new Set(e.map(t=>t.roundID)).size,Ve=e=>2**Math.ceil(Math.log(e)/Math.log(2)),et=e=>e!==0&&(e&e-1)===0,Oe=e=>t=>Math.ceil(Math.log2(t)+Math.log2(e)),tt=(e,t)=>{let n,r=null;L(e.length)?(r=e[0],n=e.slice(1)):n=e;const s=[];for(let o=0;o<n.length-t;o++)s.push([n[o],n[o+t]]);return r?[[r,S],...s]:s},nt=e=>{const t=Math.min(...e.map(r=>r.opponents.length)),n=Oe(1)(e.length);return tt(ue(e).map(r=>r.ID),n-t)},rt={name:"Amalfi",type:"AMALFI",makeRound:(e,t,n)=>$(O(j,ae,C,nt)(e,t),n),roundsNeeded:Oe(1)},he=e=>e.reduce((t,n,r,s)=>r%2===0&&r+1<s.length?t.concat([[s[r],s[r+1]]]):t,[]),st=e=>t=>{let n=t.slice(),r=[];if(e===0&&!et(t.length)){const d=Ve(t.length)-t.length;n=t.slice(d),r=t.slice(0,d)}const s=n.filter(d=>d.matchesLost===0).map(d=>d.ID),o=n.filter(d=>d.matchesLost===1).sort((d,_)=>d.opponents.length-_.opponents.length).map(d=>d.ID),i=s.length>1?he(s):[],c=o.length>1?he(o):[];if(r.length+s.length+o.length===1)return[];let u;return!i.length&&!c.length?u=[[s[0],o[0]]]:u=[...r.map(d=>[d.ID,S]),...i,...c],u},ot=e=>Math.ceil(Math.log2(e))+Math.ceil(Math.log2(Math.log2(e))),it={name:"Elimination",type:"ELIMINATION",makeRound:(e,t,n)=>$(O(j,C,st(De(t)))(e,t),n),roundsNeeded:ot,eliminate:(e,t)=>j(e,t).filter(s=>s.active).filter(s=>s.matchesLost>1)},ct=(e,t)=>{const n=e.slice(0,1),r=e.slice(1),s=r.slice(-t).concat(r.slice(0,-t));return[...n,...s]},at=e=>{const t=Math.floor(e.length/2),n=e.slice(0,t),r=e.slice(t).reverse();return n.map((s,o)=>[s,r[o]])},ut=e=>t=>{const n=t.map(o=>o.ID);L(n.length)&&n.push(S);const r=ct(n,e);return at(r)},lt=e=>Ze(e)?e-1:e,me={name:"Round Robin",type:"ROUND_ROBIN",makeRound:(e,t,n)=>$(O(C,ut(De(t)))(e),n),roundsNeeded:lt},dt=e=>e.filter(t=>t===S).length,ft=e=>e.map(t=>({...t,bye:dt(t.opponents)})),ht=e=>L(e.length)?O(ue,ft,Ne([k("bye")]),Ye,Qe("ID"))(e):S,mt=e=>Math.max(...e.map(t=>t.gamesWon)),yt=e=>Array.from({length:e},(t,n)=>n+1),pt=e=>{const t=e.length,n=[];for(let r=0;r<t-1;r++)for(let s=r+1;s<t&&r!==s;s++)n.push([r,s]);return n},_t=e=>be(pt,yt)(e.length),gt=e=>{const t=mt(e);return _t(e).map(([r,s])=>[r,s,xt(t,e[r],e[s])])};function xt(e,t,n){let r=0;const s=Xe(t.opponents),o=Math.max(...Array.from(s.values())),i=s.get(n.ID)||0;s.size>0&&i<o&&(r+=ye(e,e)+1);const c=Math.max(t.gamesWon,n.gamesWon),a=Math.min(t.gamesWon,n.gamesWon),u=c-a,d=e-u;return r+=ye(c,d),r}function ye(e,t){return(e+1)**2*(t+1)**2}const vt=e=>t=>t.reduce((n,r,s)=>{const{pairs:o,paired:i}=n,c=[e[s].ID,r!==-1?e[r].ID:-1];return c.some(a=>i.indexOf(a)!==-1)?n:{pairs:[...o,c],paired:[...i,...c]}},{pairs:[],paired:[]}).pairs,Pt=e=>Fe(e),St=e=>{const t=ht(e),n=e.filter(s=>s.ID!==t),r=O(gt,Pt,vt(n))(n);return t!==S?[...r,[t,S]]:r},wt=e=>t=>Math.ceil(Math.log2(t)+Math.log2(e)),It={name:"Swiss",type:"SWISS",makeRound:(e,t,n)=>$(O(j,ae,C,St)(e,t),n),roundsNeeded:wt(1)};function pe(e){return e.eliminate!==void 0}function W(e){switch(e){case"ROUND_ROBIN":return me;case"SWISS":return It;case"ELIMINATION":return it;case"AMALFI":return rt;default:return me}}const rn=({children:e,variant:t="primary",disabled:n=!1,type:r="button",className:s="",onClick:o,fullWidth:i=!1,iconSlot:c,title:a})=>{const u="font-medium text-lg uppercase hover:opacity-50 transition-opacity  focus:outline-none focus:ring-2 focus:ring-offset-1 whitespace-nowrap",d={primary:"cursor-pointer border-primary text-primary focus:ring-red-400",secondary:"cursor-pointer border-secondary text-secondary  focus:ring-blue-400"},_="border-gray-300 text-gray-300 cursor-not-allowed hover:bg-transparent",x=i?"w-full":"";return l.jsx("button",{type:r,disabled:n,className:`
        ${u}
        ${n?_:d[t]}
        ${x}
        ${s}
      `,onClick:n?void 0:o,title:a,children:l.jsxs("div",{className:"flex flex-row items-stretch justify-between w-full border-1",children:[l.jsx("span",{className:"flex items-center flex-1 px-4 py-2 ",children:e}),c&&l.jsx("span",{className:"border-l-1",children:l.jsx("i",{className:"h-10 w-10 flex items-center",children:c})})]})})};function X(e){return e||"/"}const Rt=({children:e,turnamentType:t,playersNum:n,minRounds:r})=>l.jsxs("div",{className:"static border-secondary border-t-2 p-0.5",children:[l.jsx("div",{className:"py-6 text-center font-bold text-4xl text-secondary uppercase leading-none",children:e}),l.jsx(ce,{}),l.jsxs("table",{className:"w-full ",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"border border-secondary px-4 py-2 font-bold text-secondary text-xs uppercase ",children:"Type"}),l.jsx("th",{className:"border border-secondary px-4 py-2 font-bold text-secondary text-xs uppercase",children:"#Players"}),l.jsx("th",{className:"border border-secondary px-4 py-2 font-bold text-secondary text-xs uppercase",children:"#Min Rounds"})]})}),l.jsx("tbody",{children:l.jsxs("tr",{children:[l.jsx("td",{className:"border border-secondary text-center",children:X(t)}),l.jsx("td",{className:"border border-secondary text-center",children:X(n)}),l.jsx("td",{className:"border border-secondary text-center",children:X(r)})]})})]})]}),_e=e=>{let t;const n=new Set,r=(u,d)=>{const _=typeof u=="function"?u(t):u;if(!Object.is(_,t)){const x=t;t=d??(typeof _!="object"||_===null)?_:Object.assign({},t,_),n.forEach(P=>P(t,x))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>a,subscribe:u=>(n.add(u),()=>n.delete(u))},a=t=e(r,s,c);return c},bt=e=>e?_e(e):_e,Nt=e=>e;function Dt(e,t=Nt){const n=V.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return V.useDebugValue(n),n}const ge=e=>{const t=bt(e),n=r=>Dt(t,r);return Object.assign(n,t),n},Ot=e=>e?ge(e):ge;function Mt(e,t){let n;try{n=e()}catch{return}return{getItem:s=>{var o;const i=a=>a===null?null:JSON.parse(a,void 0),c=(o=n.getItem(s))!=null?o:null;return c instanceof Promise?c.then(i):i(c)},setItem:(s,o)=>n.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>n.removeItem(s)}}const ee=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return ee(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return ee(r)(n)}}}},jt=(e,t)=>(n,r,s)=>{let o={storage:Mt(()=>localStorage),partialize:f=>f,version:0,merge:(f,b)=>({...b,...f}),...t},i=!1;const c=new Set,a=new Set;let u=o.storage;if(!u)return e((...f)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...f)},r,s);const d=()=>{const f=o.partialize({...r()});return u.setItem(o.name,{state:f,version:o.version})},_=s.setState;s.setState=(f,b)=>{_(f,b),d()};const x=e((...f)=>{n(...f),d()},r,s);s.getInitialState=()=>x;let P;const fe=()=>{var f,b;if(!u)return;i=!1,c.forEach(m=>{var v;return m((v=r())!=null?v:x)});const T=((b=o.onRehydrateStorage)==null?void 0:b.call(o,(f=r())!=null?f:x))||void 0;return ee(u.getItem.bind(u))(o.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==o.version){if(o.migrate){const v=o.migrate(m.state,m.version);return v instanceof Promise?v.then(J=>[!0,J]):[!0,v]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var v;const[J,We]=m;if(P=o.merge(We,(v=r())!=null?v:x),n(P,!0),J)return d()}).then(()=>{T==null||T(P,void 0),P=r(),i=!0,a.forEach(m=>m(P))}).catch(m=>{T==null||T(void 0,m)})};return s.persist={setOptions:f=>{o={...o,...f},f.storage&&(u=f.storage)},clearStorage:()=>{u==null||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>fe(),hasHydrated:()=>i,onHydrate:f=>(c.add(f),()=>{c.delete(f)}),onFinishHydration:f=>(a.add(f),()=>{a.delete(f)})},o.skipHydration||fe(),P||x},At=jt;var Me=Symbol.for("immer-nothing"),xe=Symbol.for("immer-draftable"),y=Symbol.for("immer-state");function g(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var N=Object.getPrototypeOf;function D(e){return!!e&&!!e[y]}function I(e){var t;return e?je(e)||Array.isArray(e)||!!e[xe]||!!((t=e.constructor)!=null&&t[xe])||U(e)||G(e):!1}var Et=Object.prototype.constructor.toString();function je(e){if(!e||typeof e!="object")return!1;const t=N(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Et}function F(e,t){H(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function H(e){const t=e[y];return t?t.type_:Array.isArray(e)?1:U(e)?2:G(e)?3:0}function te(e,t){return H(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ae(e,t,n){const r=H(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Tt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function U(e){return e instanceof Map}function G(e){return e instanceof Set}function w(e){return e.copy_||e.base_}function ne(e,t){if(U(e))return new Map(e);if(G(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=je(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[y];let s=Reflect.ownKeys(r);for(let o=0;o<s.length;o++){const i=s[o],c=r[i];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[i]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[i]})}return Object.create(N(e),r)}else{const r=N(e);if(r!==null&&n)return{...e};const s=Object.create(r);return Object.assign(s,e)}}function le(e,t=!1){return K(e)||D(e)||!I(e)||(H(e)>1&&(e.set=e.add=e.clear=e.delete=kt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>le(r,!0))),e}function kt(){g(2)}function K(e){return Object.isFrozen(e)}var Wt={};function R(e){const t=Wt[e];return t||g(0,e),t}var A;function Ee(){return A}function Ft(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ve(e,t){t&&(R("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function re(e){se(e),e.drafts_.forEach(zt),e.drafts_=null}function se(e){e===A&&(A=e.parent_)}function Pe(e){return A=Ft(A,e)}function zt(e){const t=e[y];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Se(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[y].modified_&&(re(t),g(4)),I(e)&&(e=z(t,e),t.parent_||B(t,e)),t.patches_&&R("Patches").generateReplacementPatches_(n[y].base_,e,t.patches_,t.inversePatches_)):e=z(t,n,[]),re(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Me?e:void 0}function z(e,t,n){if(K(t))return t;const r=t[y];if(!r)return F(t,(s,o)=>we(e,r,t,s,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return B(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let o=s,i=!1;r.type_===3&&(o=new Set(s),s.clear(),i=!0),F(o,(c,a)=>we(e,r,s,c,a,n,i)),B(e,s,!1),n&&e.patches_&&R("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function we(e,t,n,r,s,o,i){if(D(s)){const c=o&&t&&t.type_!==3&&!te(t.assigned_,r)?o.concat(r):void 0,a=z(e,s,c);if(Ae(n,r,a),D(a))e.canAutoFreeze_=!1;else return}else i&&n.add(s);if(I(s)&&!K(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;z(e,s),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&B(e,s)}}function B(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&le(t,n)}function Bt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Ee(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,o=de;n&&(s=[r],o=E);const{revoke:i,proxy:c}=Proxy.revocable(s,o);return r.draft_=c,r.revoke_=i,c}var de={get(e,t){if(t===y)return e;const n=w(e);if(!te(n,t))return Ct(e,n,t);const r=n[t];return e.finalized_||!I(r)?r:r===Y(e.base_,t)?(Q(e),e.copy_[t]=ie(r,e)):r},has(e,t){return t in w(e)},ownKeys(e){return Reflect.ownKeys(w(e))},set(e,t,n){const r=Te(w(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const s=Y(w(e),t),o=s==null?void 0:s[y];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Tt(n,s)&&(n!==void 0||te(e.base_,t)))return!0;Q(e),oe(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Y(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Q(e),oe(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=w(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){g(11)},getPrototypeOf(e){return N(e.base_)},setPrototypeOf(){g(12)}},E={};F(de,(e,t)=>{E[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});E.deleteProperty=function(e,t){return E.set.call(this,e,t,void 0)};E.set=function(e,t,n){return de.set.call(this,e[0],t,n,e[0])};function Y(e,t){const n=e[y];return(n?w(n):e)[t]}function Ct(e,t,n){var s;const r=Te(t,n);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(e.draft_):void 0}function Te(e,t){if(!(t in e))return;let n=N(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=N(n)}}function oe(e){e.modified_||(e.modified_=!0,e.parent_&&oe(e.parent_))}function Q(e){e.copy_||(e.copy_=ne(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var $t=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const i=this;return function(a=o,...u){return i.produce(a,d=>n.call(this,d,...u))}}typeof n!="function"&&g(6),r!==void 0&&typeof r!="function"&&g(7);let s;if(I(t)){const o=Pe(this),i=ie(t,void 0);let c=!0;try{s=n(i),c=!1}finally{c?re(o):se(o)}return ve(o,r),Se(s,o)}else if(!t||typeof t!="object"){if(s=n(t),s===void 0&&(s=t),s===Me&&(s=void 0),this.autoFreeze_&&le(s,!0),r){const o=[],i=[];R("Patches").generateReplacementPatches_(t,s,o,i),r(o,i)}return s}else g(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(i,...c)=>this.produceWithPatches(i,a=>t(a,...c));let r,s;return[this.produce(t,n,(i,c)=>{r=i,s=c}),r,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){I(e)||g(8),D(e)&&(e=Lt(e));const t=Pe(this),n=ie(e,void 0);return n[y].isManual_=!0,se(t),n}finishDraft(e,t){const n=e&&e[y];(!n||!n.isManual_)&&g(9);const{scope_:r}=n;return ve(r,t),Se(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}n>-1&&(t=t.slice(n+1));const r=R("Patches").applyPatches_;return D(e)?r(e,t):this.produce(e,s=>r(s,t))}};function ie(e,t){const n=U(e)?R("MapSet").proxyMap_(e,t):G(e)?R("MapSet").proxySet_(e,t):Bt(e,t);return(t?t.scope_:Ee()).drafts_.push(n),n}function Lt(e){return D(e)||g(10,e),ke(e)}function ke(e){if(!I(e)||K(e))return e;const t=e[y];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=ne(e,t.scope_.immer_.useStrictShallowCopy_)}else n=ne(e,!0);return F(n,(r,s)=>{Ae(n,r,ke(s))}),t&&(t.finalized_=!1),n}var p=new $t,Ht=p.produce;p.produceWithPatches.bind(p);p.setAutoFreeze.bind(p);p.setUseStrictShallowCopy.bind(p);p.applyPatches.bind(p);p.createDraft.bind(p);p.finishDraft.bind(p);const Ut=e=>(t,n,r)=>(r.setState=(s,o,...i)=>{const c=typeof s=="function"?Ht(s):s;return t(c,o,...i)},e(r.setState,n,r)),Gt=Ut,Ie={players:[],nextPlayerID:0},Kt=(e,t)=>({...Ie,setPlayers(n){e(r=>{r.players=n.map(({name:s})=>({ID:++t().nextPlayerID,name:s,active:!0}))})},removePlayer(n){const{ID:r}=n;e(s=>{const o=s.players.findIndex(i=>i.ID===r);o!==-1&&s.players.splice(o,1)})},deactivatePlayer(n){const{ID:r}=n;e(s=>{const o=s.players.findIndex(i=>i.ID===r);o!==-1&&(s.players[o].active=!1)})},disablePlayer(n){t().deactivatePlayer(n),t().readdRound(t().players)},resetPlayers(){e(Ie)}});function Jt(e){return Array.from(new Set(e))}function qt(e,t){if(!e)throw new Error(t)}const Re={schedulerType:void 0,matches:[],currentRoundNum:0},Xt=(e,t)=>({...Re,setSchedulerType(n){e(r=>{r.schedulerType=n})},addRound(n){const r=t().schedulerType,s=++t().currentRoundNum;if(!r)return;const o=W(r),i=t().matches,c=o.makeRound(n,i,s);pe(o)&&o.eliminate(n,i),e(a=>{a.matches.push(...c)})},readdRound(n){const r=t().currentRoundNum,s=t().schedulerType,o=t().matches;if(s)return;const i=o.filter(u=>u.roundID!==r);if(!s)return;const a=W(s).makeRound(n,o,r);e(u=>{u.matches=[...i,...a]})},updateMatch(n){e(r=>{const s=r.matches.findIndex(o=>o.ID===n.ID);s!==-1&&(r.matches[s]=n)})},nextRound(){const n=t().schedulerType,r=t().players,s=t().matches;if(n){const o=W(n);if(pe(o)){const i=o.eliminate(r,s);for(const c of i)t().deactivatePlayer(c)}}t().addRound(r)},resetRounds(){e(Re)}}),Yt=e=>e.schedulerType?W(e.schedulerType).roundsNeeded(e.players.length):0,Qt=e=>e.matches.filter(t=>t.roundID===e.currentRoundNum&&!t.hasBye),Zt=e=>e.matches.filter(t=>t.roundID!==e.currentRoundNum&&!t.hasBye).reverse(),sn=e=>Jt(Zt(e).map(t=>t.roundID)),on=e=>Qt(e).every(({result:t})=>t[0]!==t[1]),cn=e=>t=>t.matches.filter(n=>n.roundID===e),Z=Ot()(At(Gt((...e)=>({...Kt(...e),...Xt(...e)})),{name:"turnament-store"})),Vt=[{value:"ROUND_ROBIN",name:"Round Robin",shortName:"RR"},{value:"ELIMINATION",name:"Elimination",shortName:"Elim"},{value:"SWISS",name:"Swiss",shortName:"Swiss"},{value:"AMALFI",name:"Amalfi",shortName:"Swiss"}],en=e=>{const t=Vt.find(n=>n.value===e);return qt(t,"TThis value was promised to be there."),t};function an({children:e}){const t=Z(s=>s.players.length),n=Z(s=>s.schedulerType),r=Z(s=>Yt(s));return l.jsxs("header",{children:[l.jsx("div",{className:"p-4",children:l.jsx(Rt,{minRounds:r,playersNum:t,turnamentType:n?en(n).shortName:"",children:e})}),l.jsx(ce,{variant:"dashed"})]})}function un({children:e}){const t=V.Children.count(e)>1?"justify-between":"justify-end";return l.jsxs("footer",{className:"bg-white",children:[l.jsx(ce,{variant:"dashed"}),l.jsx("div",{className:`flex p-4 ${t}`,children:e})]})}function ln({children:e}){return l.jsx("div",{className:"m-auto grid h-dvh max-w-xl grid-rows-[1fr_auto]",children:e})}function dn({children:e}){return l.jsx("div",{className:"overflow-y-auto scroll-smooth",children:e})}function fn({children:e}){return l.jsx("main",{className:"p-4",children:e})}export{rn as B,ce as H,ln as P,dn as a,an as b,fn as c,un as d,S as e,sn as f,nn as g,cn as h,Qt as i,on as j,Vt as s,Z as u};
